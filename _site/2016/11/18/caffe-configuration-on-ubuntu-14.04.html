<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> <!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]--> <meta name="author" content="Ruilong Li"> <meta name="keywords" content="caffe"> <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600|Droid+Sans+Mono' rel='stylesheet' type='text/css'> <link rel="shortcut icon" href="" /> <link rel="stylesheet" href="/css/main.css"> <link rel="canonical" href="http://localhost:4000/2016/11/18/caffe-configuration-on-ubuntu-14.04.html"> <!-- Begin Jekyll SEO tag v2.5.0 --> <title>caffe ubuntu 14.04 – 2016.11.18 | Dalong’s Blog</title> <meta name="generator" content="Jekyll v3.8.3" /> <meta property="og:title" content="caffe ubuntu 14.04 – 2016.11.18" /> <meta name="author" content="Ruilong Li" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="1. Install Dependencies" /> <meta property="og:description" content="1. Install Dependencies" /> <link rel="canonical" href="http://localhost:4000/2016/11/18/caffe-configuration-on-ubuntu-14.04.html" /> <meta property="og:url" content="http://localhost:4000/2016/11/18/caffe-configuration-on-ubuntu-14.04.html" /> <meta property="og:site_name" content="Dalong’s Blog" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2016-11-18T00:00:00+08:00" /> <script type="application/ld+json"> {"description":"1. Install Dependencies","author":{"@type":"Person","name":"Ruilong Li"},"@type":"BlogPosting","url":"http://localhost:4000/2016/11/18/caffe-configuration-on-ubuntu-14.04.html","headline":"caffe ubuntu 14.04 – 2016.11.18","dateModified":"2016-11-18T00:00:00+08:00","datePublished":"2016-11-18T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2016/11/18/caffe-configuration-on-ubuntu-14.04.html"},"@context":"http://schema.org"}</script> <!-- End Jekyll SEO tag --> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Dalong's Blog" /> <script src="/assets/js/prefixfree.js"></script> </head> <body> <aside id="sidebar" class="open"> <div id="sidebar-left"> <a id="sidebar-avatar" href="/"> <img id="sidebar-avatar-img" alt="" src="http://static.zybuluo.com/lrl940607/pa3uubxkdsai8ct7htwq7giu/photo.png"/> </a> <div id="sidebar-social"> <a href="/pages/feed.xml" class="sidebar-social-icon feed"></a> <a href="mailto:li-rl16@mails.tsinghua.edu.cn" class="sidebar-social-icon email"></a> <!-- Generate icon by yourself https://icomoon.io/app/#/select --> <a href="https://github.com/liruilong940607" class="sidebar-social-icon github" target="_blank"></a> </div> <ul id="sidebar-tags"> <li class="sidebar-tag active" data-filter="recent">newest</li> <li class="sidebar-tag" data-filter="course">course</li> <li class="sidebar-tag" data-filter="tutorial">tutorial</li> <li class="sidebar-tag" data-filter="lab">lab</li> </ul> </div> <div id="sidebar-right"> <div id="search-box"> <input id="search-input" type="text" placeholder="Search" /> </div> <nav id="toc"> <a class="toc-link" data-tags="tutorial" href="/2018/01/05/python-jupyter-%E5%AE%89%E8%A3%85%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B.html"> windows python & jupyter 安装简明教程 </a> <a class="toc-link" data-tags="tutorial" href="/2017/09/01/PyQt5%E7%9A%84%E5%AE%89%E8%A3%85-Mac%E7%89%88.html"> PyQt5的安装（Mac版） </a> <a class="toc-link" data-tags="tutorial" href="/2017/09/01/Mac%E4%B8%8Bopencv2+python2.7-&-opencv3+python3.6%E7%9A%84%E9%85%8D%E7%BD%AE.html"> Mac下opencv2+python2.7 & opencv3+python3.6的配置 </a> <a class="toc-link" data-tags="tutorial" href="/2017/08/31/Mac-%E6%96%B0%E7%B3%BB%E7%BB%9F%E7%9A%84%E9%85%8D%E7%BD%AE.html"> Mac 新系统的配置 </a> <a class="toc-link" data-tags="tutorial" href="/2017/08/25/%E4%BB%8E%E4%B9%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%B0%E8%87%AA%E6%90%ADshadowsocks%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91.html"> 从买服务器到自搭shadowsocks科学上网  </a> <a class="toc-link" data-tags="lab" href="/2017/07/15/%E4%BA%BA%E5%83%8F%E6%8A%A0%E5%9B%BE%E4%BB%BB%E5%8A%A1%E6%89%8B%E5%86%8Cv2.html"> 人像抠图任务手册v2 </a> <a class="toc-link" data-tags="lab" href="/2017/06/19/Flickr%E4%BA%BA%E5%83%8F%E6%8A%A0%E5%9B%BE%E4%BB%BB%E5%8A%A1-%E7%AD%9B%E5%9B%BE%E6%89%8B%E5%86%8C.html"> Flickr人像抠图任务【筛图手册】 </a> <a class="toc-link" data-tags="course" href="/2017/06/05/%E4%B8%89%E7%BB%B4%E7%82%B9%E9%9B%86%E4%B8%AD%E6%9C%80%E5%A4%A7%E7%A9%BA%E5%BF%83%E7%90%83%E7%A8%8B%E5%BA%8F%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.html"> 三维点集中最大空心球程序说明文档 </a> <a class="toc-link" data-tags="lab" href="/2017/04/25/CCF-%E8%A7%86%E8%A7%89-%E5%9B%BE%E5%BD%A2%E5%AD%A6-%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD-%E9%A1%B6%E7%BA%A7%E4%BC%9A%E8%AE%AE.html"> CCF 视觉、图形学、人工智能 顶级会议 </a> <a class="toc-link" data-tags="course" href="/2017/04/16/%E9%80%89%E9%A2%98%E6%8A%A5%E5%91%8A-%E5%BE%AE%E4%BF%A1%E8%81%8A%E5%A4%A9%E8%AE%B0%E5%BD%95%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96.html"> 选题报告--微信聊天记录数据可视化 </a> <a class="toc-link" data-tags="lab" href="/2017/02/18/%E5%A6%82%E4%BD%95%E5%BF%AB%E9%80%9F%E5%9C%B0%E5%81%9A%E5%9B%BE%E7%89%87%E7%9A%84%E5%89%8D%E8%83%8C%E6%99%AF%E6%A0%87%E6%B3%A8.html"> 如何快速地做图片的前背景标注？ </a> <a class="toc-link" data-tags="course" href="/2017/01/15/%E4%B8%93%E9%A2%98%E5%9B%9B-CDN%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B8%8E%E6%95%85%E9%9A%9C%E6%A3%80%E6%B5%8B.html"> 专题四：CDN数据可视化与故障检测 </a> <a class="toc-link" data-tags="lab" href="/2017/01/10/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9B%B8%E5%85%B3%E6%95%B4%E7%90%86.html"> 深度学习相关整理 </a> <a class="toc-link" data-tags="lab" href="/2017/01/09/cs231n-%E6%96%AF%E5%9D%A6%E7%A6%8F%E8%AF%BE%E7%A8%8B.html"> cs231n 斯坦福课程 </a> <a class="toc-link" data-tags="course" href="/2016/12/29/%E7%A5%9E%E7%BB%8F%E4%B8%8E%E8%AE%A4%E7%9F%A5-Image-Segmentation-Using-a-Sparse-Coding-Model-of-Cortical-Area-V1.html"> 神经与认知：Image Segmentation Using a Sparse Coding Model of Cortical Area V1 </a> <a class="toc-link" data-tags="course" href="/2016/12/01/SNNs(Spiking-Neural-Networks)%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html"> SNNs(Spiking Neural Networks)学习笔记 </a> <a class="toc-link" data-tags="lab" href="/2016/11/27/RGB-D-dataset.html"> RGB-D dataset </a> <a class="toc-link" data-tags="lab" href="/2016/11/24/SUN-RGB-D-dataset.html"> SUN RGB-D dataset </a> <a class="toc-link" data-tags="lab" href="/2016/11/24/B3DO-Berkeley-3-D-Object-Dataset.html"> (B3DO) Berkeley 3-D Object Dataset </a> <a class="toc-link" data-tags="lab" href="/2016/11/23/Paper%E7%AC%94%E8%AE%B0-Segmentation%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%A4%E7%AF%87%E6%96%87%E7%AB%A0.html"> Paper笔记：Segmentation相关的两篇文章 </a> <a class="toc-link" data-tags="lab" href="/2016/11/22/%E8%AE%B0%E5%BD%95-%E4%BD%BF%E7%94%A8py-faster-rcnn%E5%9C%A8%E8%87%AA%E5%B7%B1%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86%E4%B8%8A.html"> 记录：使用py-faster-rcnn在自己的数据集上 </a> <a class="toc-link" data-tags="lab" href="/2016/11/20/Paper%E7%AC%94%E8%AE%B0-SemanticFusion.html"> Paper笔记：SemanticFusion </a> <a class="toc-link" data-tags="lab" href="/2016/11/20/Paper%E7%AC%94%E8%AE%B0-Deconvolution-Network.html"> Paper笔记：Deconvolution Network </a> <a class="toc-link" data-tags="tutorial" href="/2016/11/18/caffe-configuration-on-ubuntu-14.04.html"> caffe ubuntu 14.04 -- 2016.11.18 </a> <a class="toc-link" data-tags="course" href="/2016/11/10/%E6%B5%81%E5%AA%92%E4%BD%93%E6%8A%80%E6%9C%AF-%E4%B8%93%E9%A2%98%E5%9B%9B.html"> 流媒体技术--专题四 </a> </nav> </div> </aside> <main id="main" class="open"> <article class="post container"> <div class="post-meta"> <span class="post-meta-span date">2016 November 18</span> </div> <h1 class="post-title">caffe ubuntu 14.04 -- 2016.11.18</h1> <h3 id="1-install-dependencies">1. Install Dependencies</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>build-essential
<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>cmake git vim

<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libboost-all-dev libhdf5-serial-dev libgflags-dev libgoogle-glog-dev liblmdb-dev protobuf-compiler 

<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>python-dev python-pip
<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>python-numpy

<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>mesa-utils

</code></pre></div></div> <h3 id="2-install-driver-cuda-75-and-cuda-80-can-install-driver-automaticlly-so-skip-this-step">2. Install Driver( cuda 7.5 and cuda 8.0 can install driver automaticlly, so skip this step)</h3> <p>easy way to install:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>nvidia-367 
</code></pre></div></div> <p>查看显卡型号</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>lspci |grep VGA
</code></pre></div></div> <p>官网下载驱动***.run</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">chmod</span> +x ./<span class="k">***</span>.run
<span class="nv">$ </span>./<span class="k">***</span>.run
</code></pre></div></div> <p>安装提示关闭X server</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>service lightdm stop
<span class="nv">$ </span><span class="c">## sudo service lightdm start(command for start)</span>
</code></pre></div></div> <p>再次安装提示Nouveau冲突，继续，NVIDIA会自动配置屏蔽Nouveau，然后需要重启电脑</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>reboot
</code></pre></div></div> <p>重新安装。有一些question如下描述，最后成果安装。 I did get the error about the pre-install script failing. I continued anyway. I got asked “Would you like to run the nvidia-xconfig utility to automatically update your X configuration file so that the NVIDIA X driver will be used when you restart X? Any pre-existing X configuration file will be backed up” I answered “Yes” and continued. I have a 64-bit system and got 32-bit errors. I didn’t worry about it and continued. The 64-bit ones installed fine. I got to the end of the installation!</p> <p>after install NVIDIA driver and <strong>reboot</strong>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>nvidia-smi
</code></pre></div></div> <p><img src="http://static.zybuluo.com/lrl940607/p2poc81ohnumwvvzpiy3k5w8/Screenshot%20from%202016-11-18%2014:03:44.png" alt="Screenshot from 2016-11-18 14:03:44.png-35.4kB" /></p> <hr /> <h3 id="3-install-cuda">3. Install CUDA</h3> <p>官网下载cuda：cuda-repo-ubuntu1404-7-0-local_7.0-28_amd64.deb</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>dpkg <span class="nt">-i</span> cuda-repo-ubuntu1404-7-0-local_7.0-28_amd64.deb
<span class="nv">$ </span><span class="nb">sudo </span>apt-get update
<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>cuda
</code></pre></div></div> <p>安装完成后需要在/$HOME/.profile中添加环境变量 ## /etc/profile</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>gedit /<span class="nv">$HOME</span>/.profile
</code></pre></div></div> <p>在文件最后添加:</p> <div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PATH<span class="p">=</span><span class="sr">/usr/</span>local<span class="sr">/cuda/</span>bin<span class="p">:</span>$PATH
export PATH
</code></pre></div></div> <p>保存后, 执行下列命令, 使环境变量立即生效</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">source</span> /<span class="nv">$HOME</span>/.profile
</code></pre></div></div> <p>同时需要添加lib库路径： 在 /etc/ld.so.conf.d/加入文件cuda.conf</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>gedit /etc/ld.so.conf.d/cuda.conf
</code></pre></div></div> <p>添加内容：</p> <div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="sr">/usr/</span>local<span class="sr">/cuda/</span>lib64
</code></pre></div></div> <p>保存后，执行下列命令使之立刻生效：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>ldconfig
</code></pre></div></div> <p>此处可以安装cuda-samples来测试cuda是否成功安装。</p> <hr /> <h3 id="4-install-atlas">4. Install Atlas</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>libatlas-base-dev
</code></pre></div></div> <hr /> <h3 id="5-install-opencv">5. Install OpenCV</h3> <p>解压到任意目录</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>unzip opencv-2.4.9.zip
</code></pre></div></div> <p>进入源码目录，创建release目录</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>opencv-2.4.9
<span class="nv">$ </span><span class="nb">mkdir </span>release  
</code></pre></div></div> <p>可以看到在OpenCV目录下，有个CMakeLists.txt文件，需要事先安装一些软件</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>build-essential cmake libgtk2.0-dev pkg-config python-dev python-numpy libavcodec-dev libavformat-dev libswscale-dev  
</code></pre></div></div> <p>进入release目录，安装OpenCV是所有的文件都会被放到这个release目录下</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>release
</code></pre></div></div> <p>cmake编译OpenCV源码，安装所有的lib文件都会被安装到/usr/local目录下</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>cmake <span class="nt">-D</span> <span class="nv">BUILD_TIFF</span><span class="o">=</span>ON <span class="nt">-D</span> <span class="nv">CMAKE_BUILD_TYPE</span><span class="o">=</span>RELEASE <span class="nt">-D</span> <span class="nv">CMAKE_INSTALL_PREFIX</span><span class="o">=</span>/usr/local ..  
</code></pre></div></div> <p>安装</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>make <span class="nb">install</span>  
</code></pre></div></div> <p>Ref link: https://my.oschina.net/u/1757926/blog/293976</p> <p>在GeForce GTX TITAN 上如上安装opencv时会报错： Unsupported gpu architecture ‘compute_11’<br /> 解决方法： When using cmake to do configurations, set the option CUDA_GENERATION to specific your GPU architecture. I ran across the same error and tried this to work out the problem. this worked for me and shows a possible value for CUDA_GENERATION:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>cmake <span class="nt">-D</span> <span class="nv">CMAKE_BUILD_TYPE</span><span class="o">=</span>RELEASE <span class="nt">-D</span> <span class="nv">CMAKE_INSTALL_PREFIX</span><span class="o">=</span>/usr/local <span class="nt">-D</span> <span class="nv">CUDA_GENERATION</span><span class="o">=</span>Kepler ..
</code></pre></div></div> <p>安装2.4.9报错： error: a storage class is not allowed in an explicit specialization 解决方法： www.linuxidc.com/Linux/2015-04/116444.htm 但是其链接的文件失效了。其解释了这是2.4.9与cuda兼容的一个bug，所以之后改成安装2.4.13</p> <hr /> <h3 id="6-install-python--download-caffe">6. Install Python &amp;&amp; Download caffe</h3> <p>先安装相关依赖项</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>python-dev python-pip
</code></pre></div></div> <p>Download caffe from Github:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> ~
<span class="nv">$ </span>git clone https://github.com/BVLC/caffe.git
</code></pre></div></div> <p>转到下载的caffe的目录下，然后转到python目录下</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>caffe
<span class="nv">$ </span><span class="nb">cd </span>python
</code></pre></div></div> <p>执行如下命令：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="k">for </span>req <span class="k">in</span> <span class="k">$(</span><span class="nb">cat </span>requirements.txt<span class="k">)</span><span class="p">;</span> <span class="k">do </span><span class="nb">sudo </span>pip <span class="nb">install</span> <span class="nv">$req</span><span class="p">;</span> <span class="k">done</span>
</code></pre></div></div> <ul> <li>ImportError: No module named packaging.version <ul> <li>sudo python -m pip install -U pip</li> </ul> </li> </ul> <hr /> <h3 id="7-install-matlab--r2012b_unix-macosiso">7. Install Matlab : R2012b_UNIX-MacOS.iso</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir</span> ~/iso
<span class="nv">$ </span><span class="nb">sudo </span>mount <span class="nt">-t</span> iso9660 <span class="nt">-o</span> loop ~/Downloads/Matlab_R2012b_UNIX/R2012b_UNIX-MacOS.iso ~/iso/
<span class="nv">$ </span><span class="nb">cd</span> ~/iso
<span class="nv">$ </span><span class="nb">sudo</span> ./install
<span class="nv">$ </span><span class="nb">sudo </span>umount ~/iso
</code></pre></div></div> <p>注： 远程服务器安装时，要用ssh将X界面传输过来，所以要在ssh时加上-X（大写）参数</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> /usr/local/bin/
<span class="nv">$ </span><span class="nb">sudo ln</span> <span class="nt">-s</span> ~/Matlab/R2012b/bin/matlab matlab
</code></pre></div></div> <ul> <li>Could not initialize shared resources for X11GraphicsDevice <ul> <li>Type opengl(‘save’,’software’) at the MATLAB command</li> </ul> </li> </ul> <hr /> <h3 id="8-install-cudnn">8. Install CUDNN</h3> <p>if use cuda-8.0(nvidia 1080), must use cudnn-8.0 (https://developer.nvidia.com/rdp/cudnn-download)</p> <p>cudnn-7.0-linux-x64-v4.0-rc.tgz(use this) cudnn-6.5-linux-R1.tgz</p> <p>下载后解压缩，转到该目录下，执行：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo cp </span>lib<span class="k">*</span> /usr/local/cuda/lib64/
<span class="nv">$ </span><span class="nb">sudo cp </span>cudnn.h /usr/local/cuda/include/
</code></pre></div></div> <p>更新软链接</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> /usr/local/cuda/lib64/
<span class="nv">$ </span><span class="nb">sudo rm</span> <span class="nt">-rf</span> libcudnn.so libcudnn.so.4
<span class="nv">$ </span><span class="nb">sudo ln</span> <span class="nt">-s</span> libcudnn.so.4.0.4 libcudnn.so.4
<span class="nv">$ </span><span class="nb">sudo ln</span> <span class="nt">-s</span> libcudnn.so.4 libcudnn.so
</code></pre></div></div> <p>注：以上4.0.4一类的版本号要更改</p> <hr /> <h3 id="9-编译caffe">9. 编译caffe</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>caffe
<span class="nv">$ </span>make all <span class="nt">-j8</span>
<span class="nv">$ </span>make pycaffe
<span class="nv">$ </span>make matcaffe
<span class="nv">$ </span>make <span class="nb">test</span> <span class="nt">-j8</span>
<span class="nv">$ </span>make runtest
</code></pre></div></div> <hr /> <h3 id="10-make-matcaffe-warning">10. make matcaffe warning</h3> <p>由于安装的R2012b,适配的gcc版本低于系统自带gcc版本而报warning,用gcc-4.4替代系统的gcc-4.8：</p> <p>Install GCC 4.4</p> <p>First, install GCC 4.4 (and friends):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>apt-get <span class="nb">install </span>gcc-4.4 g++-4.4 g++-4.4-multilib gcc-4.4-multilib
</code></pre></div></div> <p>Set 4.4 to be the default</p> <p>Then set 4.4 to be higher priority than 4.8:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="c"># update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.4 100</span>
<span class="nv">$ </span><span class="c"># update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.6 50</span>
<span class="nv">$ </span>update-alternatives <span class="nt">--install</span> /usr/bin/gcc gcc /usr/bin/gcc-4.4 100
<span class="nv">$ </span>update-alternatives <span class="nt">--install</span> /usr/bin/gcc gcc /usr/bin/gcc-4.8 50
<span class="nv">$ </span><span class="c"># update-alternatives --install /usr/bin/cpp cpp-bin /usr/bin/cpp-4.4 100</span>
<span class="nv">$ </span><span class="c"># update-alternatives --install /usr/bin/cpp cpp-bin /usr/bin/cpp-4.6 50</span>
</code></pre></div></div> <p>Verify that it has worked:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gcc <span class="nt">--version</span>
</code></pre></div></div> <h3 id="11-matlab-error--matlab-version-glibcxx_3415-not-found">11. matlab error: matlab version `GLIBCXX_3.4.15’ not found</h3> <p>solution: http://wenku.baidu.com/link?url=wYcIQYWV4RIbOzU84cAMuM1bOPb7sTX5qxUL2SKvi0wYP3ddzTLE4B2ktrAtHK3Hhijzhz2GJPTKFfKj0gwxCu0mIzvXjzeiU3F4-mQ_3qm</p> <h3 id="12-nautilus-media">12. nautilus /media/</h3> <p>以窗口形式打开某个文件夹</p> <h3 id="13-jupyter-remote">13 jupyter remote</h3> <p>ref: http://blog.csdn.net/bitboy_star/article/details/51427306</p> <h3 id="14-任务查看非root运行的进程">14 任务：查看非root运行的进程</h3> <p>ps -U root -u root -N</p> </article> <div class="post-share"> <div class="container"> <a href="https://twitter.com/share?url=http://localhost:4000/2016/11/18/caffe-configuration-on-ubuntu-14.04.html&text=caffe ubuntu 14.04 -- 2016.11.18" target="_blank" class="post-share-icon twitter"></a> <a href="https://www.evernote.com/clip.action?url=http://localhost:4000/2016/11/18/caffe-configuration-on-ubuntu-14.04.html&title=caffe ubuntu 14.04 -- 2016.11.18" target="_blank" class="post-share-icon evernote"></a> <a href="http://service.weibo.com/share/share.php?url=http://localhost:4000/2016/11/18/caffe-configuration-on-ubuntu-14.04.html&title=caffe ubuntu 14.04 -- 2016.11.18" target="_blank" class="post-share-icon weibo"></a> </div> </div> <div class="comment container"> <div id="disqus_thread"> </div> </div> <div class="footer"> <div class="container"> <p class="footer-entry">All content is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA</a></p> <p class="footer-entry">Buit with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and <a href="https://github.com/P233/3-Jekyll" target="_blank">3-Jekyll theme</a> • Hosted on <a href="https://pages.github.com/" target="_blank">Github</a></p> </div> </div> </main> <button id="menu" class="open"> <span id="menu-icons"></span> </button> <button id="post-toc-menu"> <span id="post-toc-menu-icons"></span> </button> <div id="post-toc"> <span id="post-toc-title">Table of Contents</span> <ul id="post-toc-ul"></ul> </div> <script src="/assets/js/jquery-2.1.3.min.js"></script> <script src="/assets/js/jquery.pjax.js"></script> <script src="/assets/js/nprogress.js"></script> <script src="/assets/js/main.js"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-54767140-1', 'yansu.org'); ga('send', 'pageview'); </script> </body> </html>
